# 子ども食堂向けSNS

親アイテム: ハッカソン (%E3%83%8F%E3%83%83%E3%82%AB%E3%82%BD%E3%83%B3%2022093d10307b4534a14995c5f6d51789.md)

# ActivityPubとは

### World Wide Web Consortium によって標準化されたオープンな分散型ソーシャル ネットワークプロトコル

- **ActivityStreams 2.0データ形式に基づく**

## 異なるサーバー上に存在するユーザー間でメッセージやコンテンツの共有を可能にする

### **主な特徴**

- **分散型アーキテクチャ:**
    
    ユーザーは自分のサーバーを運用したり、他人のサーバーに参加したりできるため、中央集権的なプラットフォームに依存せずにコミュニケーションが可能。
    
- **相互運用性:**
    
    異なるプラットフォームやアプリケーションがActivityPubプロトコルを採用することで、それらの間でユーザーがコンテンツを共有したり、フォロー関係を築いたりすることが容易になる。
    
- **オープンスタンダード:**
    
    ActivityPubはオープンスタンダードであり、誰でも自由に実装することができるため、新たなアプリケーションやサービスを容易に開発し、既存のエコシステムに統合できる。
    

## 以下の2つを定義している

1. **サーバー⇔サーバー間の連合プロトコル** 
    
    - 分散型Webサイトが情報を共有できるようにするため
    
2. **クライアント⇔サーバー間のプロトコル**
    
     - ユーザーやその代行者としての(デスクトップ|スマートフォン|Web)アプリがActivityPub対応のサーバーやり取りできるようにする
    

### **技術的概要**

ActivityPub では、ユーザーはサーバー上のユーザーのアカウントを介して「[アクター](https://www.w3.org/TR/activitypub/#actors)」によって表される

ActivityPubは、クライアントとサーバーの間でJSON形式のメッセージをやり取りするRESTfulなAPIです。主に二つの主要なコンポーネントがあります：

- **アクター:**
    
    ActivityPubでは、"アクター"は行動を起こすことができるエンティティを指します。アクターには個人のユーザー、グループ、またはアプリケーションが含まれます。各アクターは、自分自身のプロフィール情報やアクティビティ（行動）のストリームを持つことができます。
    
- **アクティビティストリーム:** ユーザーのアクション（例えば、投稿、フォロー、いいね）を記録するためのデータ形式です。
- **インボックスとアウトボックス:** アクターは、インボックスとアウトボックスを持ちます。インボックスは他のアクターから受信したアクティビティを収集する場所であり、アウトボックスはアクターが他のアクターに送信したアクティビティを保持します。これにより、メッセージの送受信やコンテンツの共有が可能になります。
- **フェデレーション**

ActivityPubの核心的な特徴の一つは、"フェデレーション"（連合）です。これは、異なるサーバーやドメインにまたがってユーザーが相互にコミュニケーションを取ることを可能にする機能です。フェデレーションにより、大企業のプラットフォームに依存しない、より分散化されたソーシャルネットワーキングエコシステムの構築が可能になります。

異なるサーバー上のユーザーのアカウントは、異なるアクターに対応します。すべてのアクターには次のような特徴があります。

- **An `inbox`:**
    
    世界からのメッセージをどのように受け取っているのか
    
- **An `outbox`:**
    
    他の人にメッセージを送信する方法
    
    ![Untitled](%E5%AD%90%E3%81%A8%E3%82%99%E3%82%82%E9%A3%9F%E5%A0%82%E5%90%91%E3%81%91SNS%2074192ac30ea84b6b9e63c532735d98e6/Untitled.png)
    

## サーバー間のデータ転送

![Untitled](%E5%AD%90%E3%81%A8%E3%82%99%E3%82%82%E9%A3%9F%E5%A0%82%E5%90%91%E3%81%91SNS%2074192ac30ea84b6b9e63c532735d98e6/Untitled%201.png)

- すべてのActorオブジェクトに`inbox`, `outbox`という2つのプロパティを定義する

他インスタンスのアクターへアクティビティを転送する際には、転送先のアクターの`inbox`へHTTP POSTを行うことによって転送を行います。大規模なインスタンスでは複数のサーバーで動いている場合もありますし、ブーストを行う場合など、送信側・受信側のどちらでもない第三のインスタンスのアクティビティを転送する必要がある場合もあるので、Activity StreamsではLinked Data Signatureを用いたオブジェクトへの署名と検証を行うことが推奨されています。

ActivityPubでは、すべてのデータは基本的にはActivity Streams 2.0のオブジェクトとして扱い、サーバー間ではJSON-LD互換の形式にエンコードしてやり取りされています。一時的に必要となるだけの(transientな)オブジェクトを除いて、すべてのオブジェクトにはURI/IRIによるIDが割り振られています。Activity Streams 2.0のオブジェクトには、以下のようなものがあります:

サーバーからサーバーへの通信 (フェデレーション) 

## 現在AcitvityPubに対応した（する予定）のサービス

- Mastodon（マイクロブログ）
    - 現状、連合プロトコルにはActivityPubを使用しているが、クライアント⇔サーバー間の通信に関しては独自のAPIを採用している
- Threads
- PeerTube（ビデオ共有）
- Plume（ブログプラットフォーム）
- Pixelfed（画像共有）

### 参考資料

[https://www.w3.org/TR/activitypub/#actors](https://www.w3.org/TR/activitypub/#actors)

[https://qiita.com/nullkal/items/accc5d62836a930b3cd9](https://qiita.com/nullkal/items/accc5d62836a930b3cd9)

[https://argrath.github.io/activitypub/](https://argrath.github.io/activitypub/)

[https://activitypub.rocks/](https://activitypub.rocks/)

- なぜActivityPubなのか
    
    
- activityPubの欠点
    
    ActivityPubが持つ数多くの利点にも関わらず、このプロトコルにはいくつかの欠点や課題が存在します。これらは技術的な制約、実装の難しさ、ソーシャルネットワーキングの分散型モデルに固有の問題など、様々な要因によって引き起こされています。以下に、ActivityPubの主な欠点を挙げます。
    
    ### スケーラビリティとパフォーマンス
    
    - **リソースの使用:** 分散型ネットワークは、中央集権型ネットワークと比較して、データの同期や更新に関連して追加のリソースを必要とすることがあります。これは、サーバー間で情報を共有する際のオーバーヘッドが原因で、特に大規模なフェデレーションネットワークでは顕著になる可能性があります。
    
    ### セキュリティとプライバシー
    
    - **悪意のあるアクター:** 分散型ネットワークでは、誰でもサーバーを立ち上げることができるため、悪意のあるアクターがシステムに参加しやすくなります。これにより、スパム、ハラスメント、ディープフェイクなどの問題が発生するリスクが高まります。
    - **モデレーション:** セントラルコントロールが存在しないため、コンテンツのモデレーションや悪意のある行為に対する対応が難しくなります。異なるサーバーがそれぞれのモデレーションポリシーを持つため、一貫性のある対応が取りにくくなることもあります。
    
    ### 相互運用性の問題
    
    - **実装の相違:** ActivityPubの仕様はある程度柔軟性があり、異なる実装間での相互運用性が完全でない場合があります。サービス間で細かな機能の差異があると、ユーザー体験にブレが生じる可能性があります。
    - **フラグメンテーション:** 新しいプラットフォームやサービスが独自の機能を追加することで、ActivityPubエコシステム全体の断片化が進む可能性があります。これにより、異なるプラットフォーム間で完全な機能の互換性を保つことが難しくなります。
    
    ### 技術的な複雑さ
    
    - **開発と保守の負担:** ActivityPubを実装し、運用するためには、分散型アーキテクチャの特性を理解し、適切に管理する必要があります。これには、技術的な知識と資源が必要であり、特に小規模な開発チームや個人開発者にとっては負担となる場合があります。
    
    これらの欠点にもかかわらず、ActivityPubは分散型ソーシャルネットワーキングの分野において重要な役割を果たしています。これらの課題に対処するために、コミュニティは継続的