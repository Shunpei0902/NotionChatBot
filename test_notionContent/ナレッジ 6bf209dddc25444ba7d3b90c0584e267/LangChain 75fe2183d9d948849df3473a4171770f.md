# LangChain

ã‚¿ã‚°: IT
ä½œæˆæ—¥: 2024å¹´4æœˆ17æ—¥
è¦ªã‚¢ã‚¤ãƒ†ãƒ : NotionChatBot (NotionChatBot%20a9f381d1a9db43ef8df3448171957b12.md)
èª¬æ˜: å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ« (LLM) ã«åŸºã¥ã„ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

## æ¦‚è¦

å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ« (LLM) ã«åŸºã¥ã„ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

ç¾æ™‚ç‚¹ï¼ˆ2024å¹´3æœˆ13æ—¥æ™‚ç‚¹ï¼‰ã§ã¯ã€Pythonã¨TypeScriptï¼ˆJavaScriptï¼‰ã«ã‚ˆã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹

<aside>
ğŸ’¡ ãƒ»[https://www.langchain.com/](https://www.langchain.com/)
ãƒ»[https://github.com/langchain-ai/langchain](https://github.com/langchain-ai/langchain)
ãƒ»[https://python.langchain.com/docs/get_started/introduction](https://python.langchain.com/docs/get_started/introduction)

</aside>

![Untitled](LangChain%2075fe2183d9d948849df3473a4171770f/Untitled.png)

## **LangChainã®ã§ãã‚‹ã“ã¨**

ChatGPTã®ã‚ˆã†ãªè¨€èªãƒ¢ãƒ‡ãƒ«ã¯æ±ç”¨æ€§ãŒé«˜ã„ãŒã€ãƒ“ã‚¸ãƒã‚¹ç¾å ´ã§ãã®ã¾ã¾ä½¿ç”¨ã™ã‚‹ã«ã¯4ã¤ã®åˆ¶é™ãŒã‚ã‚‹

LangChainã«ã‚ˆã£ã¦ã€ã“ã‚Œã‚‰ã®4ã¤ã®åˆ¶é™ã‚’è§£æ¶ˆã§ãã‚‹

![Untitled](LangChain%2075fe2183d9d948849df3473a4171770f/Untitled%201.png)

## **LangChainã®ï¼–ã¤ã®æ©Ÿèƒ½**

![Untitled](LangChain%2075fe2183d9d948849df3473a4171770f/Untitled%202.png)

### **1. Model I/O**

ã€Œ**OpenAIã‚’ã¯ã˜ã‚ã¨ã—ãŸæ§˜ã€…ãªè¨€èªãƒ¢ãƒ‡ãƒ«ãƒ»ãƒãƒ£ãƒƒãƒˆãƒ¢ãƒ‡ãƒ«ãƒ»ã‚¨ãƒ³ã¹ãƒ‡ã‚£ãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã‚’åˆ‡ã‚Šæ›¿ãˆãŸã‚Šã€çµ„ã¿åˆã‚ã›ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã‚‹æ©Ÿèƒ½**ã€

- æœ¬æ¥ã¯å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç†è§£ã—ã€ãã‚Œãã‚Œã®è¨˜æ³•ã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŒã€LangChainã§ã¯ã™ã§ã«è¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«ãŒçµ±åˆã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€æ‰‹é–“ãŒçœã‘ã‚‹
- ã‚¿ã‚¹ã‚¯ã«å¿œã˜ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç®¡ç†ã‚„å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æŒ‡å®šãŒã§ãã‚‹ãŸã‚ã€åŠ¹ç‡çš„ã«ãƒ¢ãƒ‡ãƒ«ã‚’æ“ä½œã§ãã‚‹

[https://res.cloudinary.com/zenn/image/fetch/s--A3YvxBcW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/58e039c7a5b952622a623218.png%3Fsha%3De93cd9bd3b8cdb4e6781bedb622790aa298c0c0c](https://res.cloudinary.com/zenn/image/fetch/s--A3YvxBcW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/58e039c7a5b952622a623218.png%3Fsha%3De93cd9bd3b8cdb4e6781bedb622790aa298c0c0c)

### **2. Retrieval**

**ã€Œè¨€èªãƒ¢ãƒ‡ãƒ«ãŒå­¦ç¿’ã—ã¦ã„ãªã„äº‹æŸ„ã«é–¢ã—ã¦ã€å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ã€å›ç­”ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã€**

ä¾‹ï¼‰è¨€èªãƒ¢ãƒ‡ãƒ«ãŒå­¦ç¿’ã—ã¦ã„ãªã„ã€Œæœ€æ–°æƒ…å ±ã€ã‚„ã€Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã§å…¬é–‹ã•ã‚Œã¦ã„ãªã„ç¤¾å†…ãƒ‡ãƒ¼ã‚¿ã€ã«åŸºã¥ã„ã¦ã€å›ç­”ã‚’ç”Ÿæˆ

[https://res.cloudinary.com/zenn/image/fetch/s--lYQM-Cma--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/9152437db812af480e01834c.png%3Fsha%3D66423000123db1c9cb74ca0ee89f9d20c27bd88d](https://res.cloudinary.com/zenn/image/fetch/s--lYQM-Cma--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/9152437db812af480e01834c.png%3Fsha%3D66423000123db1c9cb74ca0ee89f9d20c27bd88d)

[https://res.cloudinary.com/zenn/image/fetch/s--uul-3lEX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/cf60bfbccdf916a8e2a7217c.png%3Fsha%3Ddf470e9c7bda6958e6592cddf6b9d4ed590feec6](https://res.cloudinary.com/zenn/image/fetch/s--uul-3lEX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/cf60bfbccdf916a8e2a7217c.png%3Fsha%3Ddf470e9c7bda6958e6592cddf6b9d4ed590feec6)

### **3. Chains**

ã€Œ**è¤‡æ•°ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå…¥åŠ›ã‚’å®Ÿè¡Œã™ã‚‹æ©Ÿèƒ½**ã€

ã“ã®æ©Ÿèƒ½ã¯ã€ChatGPTãŒãŸãã•ã‚“ã®æŒ‡ç¤ºã‚’ä¸€åº¦ã«å‡¦ç†ã§ããªã„å ´åˆã«ç‰¹ã«å½¹ç«‹ã¤

å…·ä½“çš„ã«ã¯ã€

- è¤‡æ•°ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«åˆ†ã‘ã¦ã€é †ç•ªã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šç²¾åº¦ã®é«˜ã„å›ç­”ãŒå¾—ã‚‰ã‚Œã‚‹
- è¤‡é›‘ãªå•é¡Œã‚’è§£ããŸã„æ™‚ã«ã€ä¸­é–“çš„ãªå›ç­”ã‚’ä¸€åº¦å‡ºåŠ›ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šæ­£ç¢ºãªå›ç­”ã‚’å¾—ã‚‰ã‚Œã‚‹

ã€Œ**CoTãƒ—ãƒ­ãƒ³ãƒ—ãƒ†ã‚£ãƒ³ã‚°**ã€

ä¸­é–“çš„ãªæ¨è«–ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¸ã‚€ã“ã¨ã§æ€§èƒ½å‘ä¸Šã‚’å›³ã‚‹æ‰‹æ³•

[https://res.cloudinary.com/zenn/image/fetch/s--YJJzGs-D--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/896c2aeba019d4cdd275cb02.png%3Fsha%3Db458adcf4ebeb99b7b1da13c819562803fb6cfec](https://res.cloudinary.com/zenn/image/fetch/s--YJJzGs-D--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/896c2aeba019d4cdd275cb02.png%3Fsha%3Db458adcf4ebeb99b7b1da13c819562803fb6cfec)

- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å‡ºåŠ›ã‚’çµ„ã¿åˆã‚ã›ã‚‰ã‚Œã‚‹

[https://res.cloudinary.com/zenn/image/fetch/s--LmK5hu8G--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/13900456b7c6c264808ac2fd.png%3Fsha%3D0a9670072bf2e0395ce16dfe943f51ce0cfb4dd7](https://res.cloudinary.com/zenn/image/fetch/s--LmK5hu8G--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/13900456b7c6c264808ac2fd.png%3Fsha%3D0a9670072bf2e0395ce16dfe943f51ce0cfb4dd7)

### **4. Memory**

ã€Œ**Chainsã‚„Agentsã®å†…éƒ¨ã«ãŠã‘ã‚‹çŠ¶æ…‹ä¿æŒã‚’ã™ã‚‹æ©Ÿèƒ½**ã€

- åŸºæœ¬çš„ã«ã€LangChainã§ä½¿ç”¨ã™ã‚‹OpenAIç¤¾ã®APIãªã©ã¯ã€Œ**ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ï¼ˆçŠ¶æ…‹ã‚’æŒãŸãªã„ï¼‰**ã€
    - å„APIã‚¯ã‚¨ãƒªãƒ¼ãŒç‹¬ç«‹ã—ã¦å‡¦ç†ã•ã‚Œã€ãã®ã‚¯ã‚¨ãƒªãƒ¼ãŒçµ‚ã‚ã‚‹ã¨ã€çŠ¶æ…‹ã‚„æ–‡è„ˆãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹

[https://res.cloudinary.com/zenn/image/fetch/s--woMhbZJC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/7b703fe8bbb8106bda7ebdc6.png%3Fsha%3Db53fe4fdaca59e839c3b10a9e2812af17b1c08d9](https://res.cloudinary.com/zenn/image/fetch/s--woMhbZJC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/7b703fe8bbb8106bda7ebdc6.png%3Fsha%3Db53fe4fdaca59e839c3b10a9e2812af17b1c08d9)

### **5. Agents**

ã€Œ**è¨€èªãƒ¢ãƒ‡ãƒ«ã«æ¸¡ã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã‚’ç”¨ã„ã¦ã€ãƒ¢ãƒ‡ãƒ«è‡ªä½“ãŒã€æ¬¡ã«ã©ã®ã‚ˆã†ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å–ã‚‹ã‹ã‚’æ±ºå®šãƒ»å®Ÿè¡Œãƒ»è¦³æ¸¬ãƒ»å®Œäº†ã™ã‚‹ã¾ã§ç¹°ã‚Šè¿”ã™æ©Ÿèƒ½**ã€

ã€Œ**è¨€èªãƒ¢ãƒ‡ãƒ«ã«æ¸¡ã•ã‚Œã‚‹ãƒ„ãƒ¼ãƒ«**ã€

è¨€èªãƒ¢ãƒ‡ãƒ«ãŒã‚¿ã‚¹ã‚¯é”æˆã®ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚„æ©Ÿèƒ½

ä¾‹ï¼‰æ•°å¼æ¼”ç®—ã€æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã®åˆ©ç”¨ã€ç‰¹å®šã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã€ç‰¹å®šã®APIã®å‘¼ã³å‡ºã—ãªã©

[https://res.cloudinary.com/zenn/image/fetch/s--LYiQRkO_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/6cded18ef123504c169dae27.png%3Fsha%3D1fe814917d47703c199e5006ff3e972d2681a8cd](https://res.cloudinary.com/zenn/image/fetch/s--LYiQRkO_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/6cded18ef123504c169dae27.png%3Fsha%3D1fe814917d47703c199e5006ff3e972d2681a8cd)

### **6. Callbacks**

ã€Œ**å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ã‚®ãƒ³ã‚°ã€ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã€éåŒæœŸå‡¦ç†ãªã©ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã™ã‚‹æ©Ÿèƒ½**ã€

[https://res.cloudinary.com/zenn/image/fetch/s--l3eDx3oE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/a42233e647720722b2a30777.png%3Fsha%3Df98b961d0ce7c9cb95bdecaf1fd66fdef7753469](https://res.cloudinary.com/zenn/image/fetch/s--l3eDx3oE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/a42233e647720722b2a30777.png%3Fsha%3Df98b961d0ce7c9cb95bdecaf1fd66fdef7753469)

ä»£è¡¨çš„ãª2ã¤ã®æ©Ÿèƒ½

1. **ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ **: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ã‚°ã®è¨˜éŒ²ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã«ç‰¹ã«æœ‰ç”¨ã§ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ä½•ã‹å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã‚„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒä½ä¸‹ã—ãŸå ´åˆã«ã€ã™ãã«ãã®åŸå› ã‚’ç‰¹å®šã—ã€å¯¾å‡¦ã§ãã¾ã™ã€‚

1. **éåŒæœŸå‡¦ç†ã®ã‚µãƒãƒ¼ãƒˆ**: Callbacksæ©Ÿèƒ½ã¯éåŒæœŸå‡¦ç†ã«å¯¾å¿œã—ã¦ãŠã‚Šã€ã“ã‚Œã«ã‚ˆã‚Šå‡¦ç†ã®åŠ¹ç‡ãŒå‘ä¸Šã—ã¾ã™ã€‚ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚„ä»–ã®éåŒæœŸã‚¿ã‚¹ã‚¯ã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã«è¡Œãˆã¾ã™ã€‚

ãŸã¨ãˆã°ã€å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å‡¦ç†ã™ã‚‹ã‚ˆã†ãªã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚¿ã‚¹ã‚¯ã§ã‚‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯å®‰å®šã—ã¦å‹•ä½œã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã§ãã¾ã™ã€‚

[https://res.cloudinary.com/zenn/image/fetch/s--ItHelJTb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/8c4d8c0fee82e418a0ee6b26.png%3Fsha%3Dc291f0ad81e4dd4ef6f18514f101880a782621ad](https://res.cloudinary.com/zenn/image/fetch/s--ItHelJTb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/8c4d8c0fee82e418a0ee6b26.png%3Fsha%3Dc291f0ad81e4dd4ef6f18514f101880a782621ad)

## **LangChainã®å…¨ä½“æ§‹æˆ**

- **LangChainãƒ©ã‚¤ãƒ–ãƒ©ãƒª**
    - PythonãŠã‚ˆã³JavaScriptï¼ˆTypeScriptï¼‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚Chainsã‚„Agents, Retrievalãªã©ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰å®Ÿè¡Œã™ã‚‹æ©Ÿèƒ½ãŒå«ã¾ã‚Œã‚‹
- **LangChain Templates**
    - ä¸€èˆ¬çš„ãªãƒãƒ£ãƒƒãƒˆãƒ„ãƒ¼ãƒ«ãªã©ã§ä½¿ã‚ã‚Œã‚‹æ©Ÿèƒ½ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹
    - LangServeã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã‚‚ç°¡ç•¥åŒ–å¯èƒ½
- **LangServe**
    - LangChainã«ãŠã‘ã‚‹Runnablesã¨Chainsã‚’REST APIã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **LangSmith**
    - LLMãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«æ§‹ç¯‰ã•ã‚ŒãŸæ©Ÿèƒ½ã‚’ãƒ‡ãƒãƒƒã‚°ã€ãƒ†ã‚¹ãƒˆã€è©•ä¾¡ã€ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã§ãã‚‹é–‹ç™ºè€…ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
    - LLMOps / AIOps / DevOpsã®ä½ç½®ä»˜ã‘ã«å½“ãŸã‚‹

![Untitled](LangChain%2075fe2183d9d948849df3473a4171770f/Untitled%203.png)

## å‚è€ƒè³‡æ–™

[https://ãƒ‡ãƒ“ãƒƒãƒˆzenn.dev/umi_mori/books/prompt-engineer/viewer/langchain_overview](https://xn--zenn-9o4cxai0g.dev/umi_mori/books/prompt-engineer/viewer/langchain_overview)

[https://aws.amazon.com/jp/what-is/langchain/](https://aws.amazon.com/jp/what-is/langchain/)